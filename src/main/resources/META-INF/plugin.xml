<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.chbndrhnns.betterpy</id>
    <name>BetterPy</name>
    <vendor>chbndrhnns</vendor>

    <description><![CDATA[
        Connexion / OpenAPI assistance for PyCharm and IntelliJ-based IDEs.

        <ul>
            <li><b>Inspections</b> for unresolved Connexion references in JSON and YAML OpenAPI specs.</li>
            <li><b>Navigation</b> between Python handlers and OpenAPI operations.</li>
            <li><b>Line markers</b> to jump between spec and implementation.</li>
        </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.python</depends>
    <depends>com.intellij.modules.json</depends>
    <depends optional="true" config-file="yaml-support.xml">org.jetbrains.plugins.yaml</depends>

    <resource-bundle>messages.MyBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService
                serviceImplementation="com.github.chbndrhnns.betterpy.featureflags.PluginSettingsState"/>

        <psi.referenceContributor language="JSON"
                                  implementation="com.github.chbndrhnns.betterpy.features.connexion.ConnexionJsonReferenceContributor"/>

        <localInspection language="JSON"
                         implementationClass="com.github.chbndrhnns.betterpy.features.connexion.ConnexionJsonInspection"
                         displayName="BetterPy: Unresolved Connexion reference"
                         groupName="Connexion"
                         enabledByDefault="true"
                         level="ERROR"/>

        <codeInsight.lineMarkerProvider language="Python"
                                        implementationClass="com.github.chbndrhnns.betterpy.features.connexion.ConnexionPythonLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JSON"
                                        implementationClass="com.github.chbndrhnns.betterpy.features.connexion.ConnexionJsonLineMarkerProvider"/>
    </extensions>

    <actions>
        <action id="Connexion.GoToOpenApiOperation"
                class="com.github.chbndrhnns.betterpy.features.connexion.GoToOpenApiOperationAction"
                text="BetterPy: Go to OpenAPI Operation"
                description="Navigate to OpenAPI declaration">
            <add-to-group group-id="EditorPopupMenu.GoTo" anchor="after" relative-to-action="FindUsages"/>
        </action>
    </actions>
</idea-plugin>
