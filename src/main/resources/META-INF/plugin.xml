<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.chbndrhnns.betterpy</id>
    <name>BetterPy</name>
    <vendor>chbndrhnns</vendor>

    <description><![CDATA[
        A toolbox of productivity features for Python codebases (especially DDD-style projects).

        <ul>
            <li><b>Intentions / quick-fixes</b> for common refactorings (populate arguments, introduce parameter object, adjust optionality, and more).</li>
            <li><b>Type-hint helpers</b> to wrap/unwrap values to the expected type when the inferred type mismatches.</li>
            <li><b>Connexion / OpenAPI assistance</b>: inspections and navigation for Connexion references in Python and JSON.</li>
            <li><b>Smarter navigation</b> for protocol-related code (custom protocol definition search/caching) and improved Python structure view.</li>
        </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.python</depends>
    <depends>com.intellij.modules.json</depends>

    <depends optional="true" config-file="yaml-support.xml">org.jetbrains.plugins.yaml</depends>
    <depends optional="true" config-file="mcp-support.xml">com.intellij.mcpServer</depends>

    <resource-bundle>messages.MyBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.pytest.testtree.JumpToPytestNodeInTestTreeIntention
            </className>
            <category>BetterPy</category>
        </intentionAction>
        <completion.contributor language="Python"
                                implementationClass="com.github.chbndrhnns.betterpy.features.completion.PyExpectedTypeCompletionContributor"/>
        <completion.contributor language="Python"
                                implementationClass="com.github.chbndrhnns.betterpy.features.completion.PyNamedArgumentFromScopeCompletionContributor"/>
        <completion.contributor language="Python"
                                implementationClass="com.github.chbndrhnns.betterpy.features.completion.PyMockPatchObjectAttributeCompletionContributor"/>
        <psi.referenceContributor language="Python"
                                  implementation="com.github.chbndrhnns.betterpy.core.psi.PyMockPatchReferenceContributor"/>
        <psi.referenceContributor language="Python"
                                  implementation="com.github.chbndrhnns.betterpy.core.psi.PyNewTypeTypeVarReferenceContributor"/>
        <psi.referenceContributor language="Python"
                                  implementation="com.github.chbndrhnns.betterpy.core.psi.PyFilterWarningsReferenceContributor"/>
        <psi.referenceContributor language="Python"
                                  implementation="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureReferenceContributor"/>
        <findUsagesHandlerFactory
                implementation="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureFindUsagesHandlerFactory"/>
        <lang.surroundDescriptor language="Python"
                                 implementationClass="com.github.chbndrhnns.betterpy.features.pytest.surround.PytestSurroundDescriptor"/>

        <psi.referenceContributor language="JSON"
                                  implementation="com.github.chbndrhnns.betterpy.features.connexion.ConnexionJsonReferenceContributor"/>

        <localInspection language="JSON"
                         implementationClass="com.github.chbndrhnns.betterpy.features.connexion.ConnexionJsonInspection"
                         displayName="BetterPy: Unresolved Connexion reference"
                         groupName="Connexion"
                         enabledByDefault="true"
                         level="ERROR"/>

        <localInspection language="Python"
                         implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyMockUnresolvedReferenceInspection"
                         displayName="BetterPy: Unresolved Mock spec reference"
                         groupName="Python"
                         enabledByDefault="true"
                         level="ERROR"/>

        <localInspection language="Python"
                         implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyMockReturnAssignmentInspection"
                         displayName="BetterPy: Invalid return_value assignment on Mock"
                         groupName="Python"
                         enabledByDefault="true"
                         level="WARNING"/>

        <localInspection language="Python"
                         implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyMockPatchObjectAttributeInspection"
                         displayName="BetterPy: Unresolved patch.object attribute"
                         groupName="Python"
                         enabledByDefault="true"
                         level="ERROR"/>

        <localInspection language="Python"
                         implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyMockPatchUnresolvedReferenceInspection"
                         displayName="BetterPy: Unresolved patch target"
                         groupName="Python"
                         enabledByDefault="true"
                         level="ERROR"/>

        <codeInsight.lineMarkerProvider language="Python"
                                        implementationClass="com.github.chbndrhnns.betterpy.features.connexion.ConnexionPythonLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JSON"
                                        implementationClass="com.github.chbndrhnns.betterpy.features.connexion.ConnexionJsonLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="Python"
                                        implementationClass="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="Python"
                                        implementationClass="com.github.chbndrhnns.betterpy.features.refactoring.parameterobject.ParameterObjectLineMarkerProvider"/>
        <codeInsight.gotoSuper language="Python"
                               implementationClass="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureGotoSuperHandler"
                               order="first"/>

        <definitionsScopedSearch
                implementation="com.github.chbndrhnns.betterpy.features.search.PyProtocolDefinitionsSearchExecutor"/>
        <definitionsScopedSearch
                implementation="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureImplementationSearch"/>

        <!-- Protocol implementation search index and cache -->
        <fileBasedIndex implementation="com.github.chbndrhnns.betterpy.core.index.PyClassMembersFileIndex"/>
        <fileBasedIndex implementation="com.github.chbndrhnns.betterpy.core.index.PyLambdaFileIndex"/>
        <fileBasedIndex implementation="com.github.chbndrhnns.betterpy.core.index.PytestFixtureFileIndex"/>
        <psi.treeChangeListener
                implementation="com.github.chbndrhnns.betterpy.bootstrap.listeners.ProtocolCacheInvalidationListener"/>

        <lang.psiStructureViewFactory language="Python"
                                      implementationClass="com.github.chbndrhnns.betterpy.features.structureView.MyPythonStructureViewFactory"
                                      order="first"/>

        <navbar implementation="com.github.chbndrhnns.betterpy.features.navbar.PyNavBarModelExtension"/>

        <applicationService
                serviceImplementation="com.github.chbndrhnns.betterpy.featureflags.PluginSettingsState"/>

        <projectService
                serviceInterface="com.intellij.testIntegration.TestFailedLineManager"
                serviceImplementation="com.github.chbndrhnns.betterpy.features.pytest.outcome.PyTestFailedLineManager"/>

        <localInspection language="Python"
                         implementationClass="com.github.chbndrhnns.betterpy.features.pytest.outcome.PyTestFailedLineInspection"
                         displayName="BetterPy: Test failed line"
                         groupName="Python"
                         enabledByDefault="true"
                         level="WARNING"
                         shortName="PyTestFailedLineInspection"/>

        <localInspection language="Python"
                         implementationClass="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureScopeInspection"
                         displayName="BetterPy: Pytest fixture scope"
                         groupName="Python"
                         enabledByDefault="true"
                         level="WARNING"
                         shortName="PytestFixtureScopeInspection"/>

        <localInspection language="Python"
                         implementationClass="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureUninjectedReferenceInspection"
                         displayName="BetterPy: Pytest fixture uninjected reference"
                         groupName="Python"
                         enabledByDefault="true"
                         level="ERROR"
                         shortName="PytestFixtureUninjectedReferenceInspection"/>

        <runLineMarkerContributor language="Python"
                                  implementationClass="com.github.chbndrhnns.betterpy.features.run.PyPackageRunLineMarkerContributor"/>

        <gotoTargetPresentationProvider
                implementation="com.github.chbndrhnns.betterpy.features.navigation.PyGotoTargetPresentationProvider"/>

        <codeInsight.overrideMethod language="Python"
                                    implementationClass="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureOverrideMethodsHandler"
                                    order="first"/>

        <notificationGroup id="BetterPy" displayType="BALLOON" isLogByDefault="true"/>
        <notificationGroup id="BetterPy Notifications" displayType="BALLOON" isLogByDefault="true"/>

        <statusBarWidgetFactory id="BetterPyStatusBarWidget"
                                implementation="com.github.chbndrhnns.betterpy.features.statusbar.BetterPyStatusBarWidgetFactory"/>

        <postStartupActivity
                implementation="com.github.chbndrhnns.betterpy.bootstrap.startup.PythonVersionStartupActivity"/>

        <postStartupActivity
                implementation="com.github.chbndrhnns.betterpy.featureflags.IncubatingFeatureNotifier"/>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.WrapWithExpectedTypeIntention
            </className>
            <category>Type mismatch</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.WrapItemsWithExpectedTypeIntention
            </className>
            <category>Type mismatch</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.UnwrapToExpectedTypeIntention
            </className>
            <category>Type mismatch</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.UnwrapItemsToExpectedTypeIntention
            </className>
            <category>Type mismatch</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.populate.PopulateArgumentsIntention
            </className>
            <category>Arguments</category>
        </intentionAction>
        <intentionAction>
            <className>
                com.github.chbndrhnns.betterpy.features.intentions.populate.PopulateArgumentsRecursiveFromLocalsIntention
            </className>
            <category>Arguments</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.ToggleTypeAliasIntention</className>
            <category>Refactorings</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.exports.PyExportSymbolToTargetIntention</className>
            <category>Refactorings</category>
        </intentionAction>


        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.AddSelfParameterIntention</className>
            <category>Refactorings</category>
        </intentionAction>

        <!-- Deprecated populate intentions removed -->

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.visibility.PyChangeVisibilityIntention
            </className>
            <category>Visibility</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.optional.MakeParameterOptionalIntention
            </className>
            <category>Type hint</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.optional.MakeParameterMandatoryIntention
            </className>
            <category>Type hint</category>
        </intentionAction>

        <intentionAction>
            <className>
                com.github.chbndrhnns.betterpy.features.intentions.signature.StripSignatureTypeAnnotationsIntention
            </className>
            <category>Type hint</category>
        </intentionAction>


        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.dictAccess.PyDictAccessIntention</className>
            <category>Dictionaries</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.protocol.CallableToProtocolIntention
            </className>
            <category>Type hint</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.dictAccess.PyTryExceptToDictGetIntention
            </className>
            <category>Dictionaries</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.dictAccess.PyDictGetToTryExceptIntention
            </className>
            <category>Dictionaries</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.exceptions.AddExceptionCaptureIntention
            </className>
            <category>Exceptions</category>
        </intentionAction>

        <intentionAction>
            <className>
                com.github.chbndrhnns.betterpy.features.intentions.abstractmethod.ImplementAbstractMethodInChildClassesIntention
            </className>
            <category>Refactorings</category>
        </intentionAction>

        <intentionAction>
            <className>
                com.github.chbndrhnns.betterpy.features.intentions.exceptions.WrapExceptionsWithParenthesesIntention
            </className>
            <category>Exceptions</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.localvariable.CreateLocalVariableIntention
            </className>
            <category>Create local variable</category>
        </intentionAction>


        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.pytest.TogglePytestSkipIntention</className>
            <category>Test</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.pytest.ParametrizePytestTestIntention
            </className>
            <category>Test</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.pytest.ConvertToPytestParamIntention
            </className>
            <category>Test</category>
        </intentionAction>

        <intentionAction>
            <className>
                com.github.chbndrhnns.betterpy.features.intentions.pytest.ConvertToPlainParametrizeValuesIntention
            </className>
            <category>Test</category>
        </intentionAction>

        <intentionAction>
            <className>
                com.github.chbndrhnns.betterpy.features.pytest.fixture.CreateFixtureFromParameterIntention
            </className>
            <category>Test</category>
        </intentionAction>


        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.exports.PyUnexportSymbolIntention</className>
            <category>Refactorings</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.pytest.WrapTestInClassIntention</className>
            <category>Test</category>
        </intentionAction>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.intentions.pytest.MoveTestToClassIntention</className>
            <category>Test</category>
        </intentionAction>

        <intentionAction>
            <className>
                com.github.chbndrhnns.betterpy.features.intentions.abstractmethod.MakeMemberAbstractInAbstractClassIntention
            </className>
            <category>Abstract methods</category>
        </intentionAction>

        <applicationConfigurable
                displayName="BetterPy"
                id="com.github.chbndrhnns.betterpy.featureflags"
                instance="com.github.chbndrhnns.betterpy.featureflags.PluginSettingsConfigurable"/>

        <applicationConfigurable
                parentId="com.github.chbndrhnns.betterpy.featureflags"
                displayName="Parameter Object Refactoring"
                id="com.github.chbndrhnns.betterpy.featureflags.parameterobject"
                instance="com.github.chbndrhnns.betterpy.featureflags.ParameterObjectConfigurable"/>

        <applicationConfigurable
                parentId="com.github.chbndrhnns.betterpy.featureflags"
                displayName="Pytest"
                id="com.github.chbndrhnns.betterpy.featureflags.pytest"
                instance="com.github.chbndrhnns.betterpy.featureflags.PytestConfigurable"/>


        <localInspection
                language="Python"
                shortName="PyMissingInDunderAllInspection"
                displayName="BetterPy: Symbol not exported in __all__"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.github.chbndrhnns.betterpy.features.exports.PyMissingInDunderAllInspection"/>

        <localInspection
                language="Python"
                shortName="PyPrivateModuleImportInspection"
                displayName="BetterPy: Import from private module when symbol is exported from package"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.github.chbndrhnns.betterpy.features.exports.PyPrivateModuleImportInspection"/>

        <localInspection
                language="Python"
                shortName="PyDataclassMissingInspection"
                displayName="BetterPy: Subclass of a dataclass should also be decorated with @dataclass"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyDataclassMissingInspection"/>

        <localInspection
                language="Python"
                shortName="PyAbstractMethodNotImplementedInChildInspection"
                displayName="BetterPy: Abstract method not implemented in child classes"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyAbstractMethodNotImplementedInChildInspection"/>

        <localInspection
                language="Python"
                shortName="PyConstantShouldBeFinalInspection"
                displayName="BetterPy: Constant should be declared as Final"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="WEAK WARNING"
                implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyConstantShouldBeFinalInspection"/>

        <localInspection
                language="Python"
                shortName="PyShadowingStdlibModuleInspection"
                displayName="BetterPy: File name shadows a Python standard library module"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyShadowingStdlibModuleInspection"/>

        <localInspection
                language="Python"
                shortName="PyUnresolvedReferenceAsErrorInspection"
                displayName="BetterPy: Unresolved reference as error"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="com.github.chbndrhnns.betterpy.features.inspections.PyUnresolvedReferenceAsErrorInspection"/>

        <localInspection
                language="Python"
                shortName="PyStrictSourceRootImportInspection"
                displayName="BetterPy: Strict source root prefix"
                groupPath="Python"
                groupName="Python"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.github.chbndrhnns.betterpy.features.imports.PyStrictSourceRootImportInspection"/>

        <renamePsiElementProcessor
                implementation="com.github.chbndrhnns.betterpy.features.refactoring.PyShadowingStdlibRenameProcessor"
                order="first"/>

        <renamePsiElementProcessor
                implementation="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureRenameProcessor"
                order="first"/>

        <usageFilteringRuleProvider
                implementation="com.github.chbndrhnns.betterpy.features.usages.PyTypeAnnotationFilteringRuleProvider"/>

        <consoleFilterProvider
                implementation="com.github.chbndrhnns.betterpy.features.testing.PyMessageFilterProvider"/>

        <searchEverywhereContributor
                implementation="com.github.chbndrhnns.betterpy.features.searcheverywhere.PytestIdentifierContributor$Factory"/>

        <intentionAction>
            <className>com.github.chbndrhnns.betterpy.features.pytest.outcome.ReplaceExpectedWithActualIntention
            </className>
            <category>Test</category>
        </intentionAction>

        <daemon.intentionActionFilter
                implementation="com.github.chbndrhnns.betterpy.features.intentions.suppressor.SuppressSuggestedRefactoringIntentionActionFilter"/>

        <daemon.intentionActionFilter
                implementation="com.github.chbndrhnns.betterpy.features.intentions.suppressor.RenameToSelfFilter"/>

        <lang.documentationProvider language="Python"
                                    implementationClass="com.github.chbndrhnns.betterpy.features.documentation.DataclassQuickInfoProvider"
                                    order="first"/>
    </extensions>

    <extensions defaultExtensionNs="Pythonid">
        <pySuperMethodsSearch
                implementation="com.github.chbndrhnns.betterpy.features.pytest.fixture.PytestFixtureSuperMethodsSearchExecutor"/>
    </extensions>

    <extensions defaultExtensionNs="Pythonid">
        <canonicalPathProvider
                implementation="com.github.chbndrhnns.betterpy.features.imports.SourceRootPrefixProvider"/>
        <canonicalPathProvider
                implementation="com.github.chbndrhnns.betterpy.features.imports.SpecificImportPathProvider"/>
        <importCandidateProvider
                implementation="com.github.chbndrhnns.betterpy.features.imports.RelativeImportCandidateProvider"/>
        <importCandidateProvider
                implementation="com.github.chbndrhnns.betterpy.features.imports.HideTransientImportProvider"/>
    </extensions>

    <projectListeners>
        <listener class="com.github.chbndrhnns.betterpy.bootstrap.listeners.PythonVersionCheckerListener"
                  topic="com.intellij.openapi.roots.ModuleRootListener"/>
        <listener class="com.github.chbndrhnns.betterpy.features.pytest.outcome.TestFailureListener"
                  topic="com.intellij.execution.testframework.sm.runner.SMTRunnerEventsListener"/>
    </projectListeners>

    <actions>
        <action id="com.github.chbndrhnns.betterpy.features.actions.CopyPackageContentAction"
                class="com.github.chbndrhnns.betterpy.features.actions.CopyPackageContentAction"
                text="BetterPy: Copy Package Content"
                description="Copies the content of all files in the selected directory to the clipboard">

            <!-- Add to the Project View context menu (right-click on a folder) -->
            <add-to-group group-id="ProjectViewPopupMenu" anchor="after" relative-to-action="CopyReference"/>
        </action>

        <action id="Python.ShowTypeAnnotations"
                class="com.intellij.openapi.actionSystem.EmptyAction"
                text="BetterPy: Show Type Annotations"
                description="Show references occurring within type hints"
                icon="AllIcons.Nodes.Type">
        </action>


        <action id="com.github.chbndrhnns.betterpy.features.refactoring.parameterobject.IntroduceParameterObjectRefactoringAction"
                class="com.github.chbndrhnns.betterpy.features.refactoring.parameterobject.IntroduceParameterObjectRefactoringAction"
                text="BetterPy: Introduce Parameter Object..."
                description="Introduces a parameter object for the current function">
            <add-to-group group-id="RefactoringMenu" anchor="last"/>
        </action>

        <action id="com.github.chbndrhnns.betterpy.features.refactoring.parameterobject.InlineParameterObjectRefactoringAction"
                class="com.github.chbndrhnns.betterpy.features.refactoring.parameterobject.InlineParameterObjectRefactoringAction"
                text="BetterPy: Inline Parameter Object..."
                description="Inlines a parameter object back into individual parameters">
            <add-to-group group-id="RefactoringMenu" anchor="last"/>
        </action>

        <action id="com.github.chbndrhnns.betterpy.features.intentions.pytest.WrapTestInClassRefactoringAction"
                class="com.github.chbndrhnns.betterpy.features.intentions.pytest.WrapTestInClassRefactoringAction"
                text="BetterPy: Wrap Test in Class..."
                description="Wraps a module-level pytest test function inside a test class">
            <add-to-group group-id="RefactoringMenu" anchor="last"/>
        </action>

        <action id="com.github.chbndrhnns.betterpy.features.intentions.pytest.MoveTestToClassRefactoringAction"
                class="com.github.chbndrhnns.betterpy.features.intentions.pytest.MoveTestToClassRefactoringAction"
                text="BetterPy: Move Test to Another Class..."
                description="Moves a test method to another class (new or existing)">
            <add-to-group group-id="RefactoringMenu" anchor="last"/>
        </action>

        <action id="com.github.chbndrhnns.betterpy.features.intentions.customtype.IntroduceCustomTypeRefactoringAction"
                class="com.github.chbndrhnns.betterpy.features.intentions.customtype.IntroduceCustomTypeRefactoringAction"
                text="BetterPy: Introduce Custom Type..."
                description="Introduces a custom type from a stdlib type annotation">
            <add-to-group group-id="RefactoringMenu" anchor="last"/>
        </action>

        <action id="com.github.chbndrhnns.betterpy.features.actions.CopyBuildNumberAction"
                class="com.github.chbndrhnns.betterpy.features.actions.CopyBuildNumberAction"
                text="BetterPy: Copy Build Number"
                description="Copies the current IDE build number to the clipboard">
            <add-to-group group-id="HelpMenu" anchor="last"/>
        </action>
        <action id="com.github.chbndrhnns.betterpy.features.actions.CopyDiagnosticDataAction"
                class="com.github.chbndrhnns.betterpy.features.actions.CopyDiagnosticDataAction"
                text="BetterPy: Copy Diagnostic Data"
                description="Copies plugin version and IDE build number to the clipboard">
            <add-to-group group-id="HelpMenu" anchor="last"/>
        </action>
        <action id="com.github.chbndrhnns.betterpy.features.actions.RebuildClassMembersIndexAction"
                class="com.github.chbndrhnns.betterpy.features.actions.RebuildClassMembersIndexAction"
                text="BetterPy: Rebuild Python Class Members Index"
                description="Triggers a rebuild of the Python class members index used for Protocol implementation search">
        </action>
        <action id="MyPlugin.CopyBlockWithDependenciesAction"
                class="com.github.chbndrhnns.betterpy.features.actions.CopyBlockWithDependenciesAction"
                text="BetterPy: Copy with Dependencies">
            <add-to-group group-id="Copy.Paste.Special" anchor="last"/>
        </action>

        <action id="MyPlugin.CopyPytestNodeIdFromEditorAction"
                class="com.github.chbndrhnns.betterpy.features.actions.CopyPytestNodeIdFromEditorAction"
                text="BetterPy: Copy Pytest Node ID">
            <add-to-group group-id="Copy.Paste.Special" anchor="last"/>
        </action>

        <group id="MyPlugin.CopySpecialGroup" text="BetterPy: Copy Special" popup="true">
            <add-to-group group-id="TestTreePopupMenu" anchor="last"/>
            <action id="MyPlugin.CopyPytestNodeIds"
                    class="com.github.chbndrhnns.betterpy.features.pytest.testtree.CopyPytestNodeIdAction"
                    text="BetterPy: Copy Pytest Node IDs"/>
            <action id="MyPlugin.CopyFQNs"
                    class="com.github.chbndrhnns.betterpy.features.pytest.testtree.CopyFQNAction"
                    text="BetterPy: Copy FQNs"/>
            <action id="MyPlugin.CopyStacktrace"
                    class="com.github.chbndrhnns.betterpy.features.pytest.testtree.CopyStacktraceAction"
                    text="BetterPy: Copy Stacktrace"/>
        </group>

        <action id="MyPlugin.TogglePytestSkipFromTestTree"
                class="com.github.chbndrhnns.betterpy.features.pytest.testtree.TogglePytestSkipFromTestTreeAction"
                text="BetterPy: Toggle Pytest Skip"
                description="Toggles pytest skip marker for the selected test node (function/class/module)">
            <add-to-group group-id="TestTreePopupMenu" anchor="last"/>
        </action>


        <action id="MyPlugin.JumpToPytestNodeInTestTree"
                class="com.github.chbndrhnns.betterpy.features.pytest.testtree.JumpToPytestNodeInTestTreeAction"
                text="BetterPy: Jump to Test Tree Node"
                description="Selects the corresponding pytest node in the active test tree">
            <add-to-group group-id="EditorPopupMenu.GoTo" anchor="after" relative-to-action="FindUsages"/>
        </action>

        <action id="com.github.chbndrhnns.betterpy.features.pytest.fixture.NewPytestTestAction"
                class="com.github.chbndrhnns.betterpy.features.pytest.fixture.NewPytestTestAction"
                text="pytest test"
                description="Creates a new pytest test in the current scope">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>

        <action id="com.github.chbndrhnns.betterpy.features.pytest.fixture.NewPytestFixtureAction"
                class="com.github.chbndrhnns.betterpy.features.pytest.fixture.NewPytestFixtureAction"
                text="pytest fixture"
                description="Creates a new pytest fixture in the current scope">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>

        <action id="Connexion.GoToOpenApiOperation"
                class="com.github.chbndrhnns.betterpy.features.connexion.GoToOpenApiOperationAction"
                text="BetterPy: Go to OpenAPI Operation"
                description="Navigate to OpenAPI declaration">
            <add-to-group group-id="EditorPopupMenu.GoTo" anchor="after" relative-to-action="FindUsages"/>
        </action>
    </actions>
    <extensions defaultExtensionNs="Pythonid">
        <pythonDocumentationQuickInfoProvider
                implementation="com.github.chbndrhnns.betterpy.features.documentation.DataclassQuickInfoProvider"
            order="first"/>
        <typeProvider implementation="com.github.chbndrhnns.betterpy.features.type.PyMockTypeProvider"
                      order="first"/>
        <typeCheckerExtension implementation="com.github.chbndrhnns.betterpy.features.type.PyMockTypeCheckerExtension"/>
    </extensions>
    <extensions defaultExtensionNs="com.intellij">
        <gotoDeclarationHandler
                implementation="com.github.chbndrhnns.betterpy.features.navigation.PyMockPatchObjectGotoDeclarationHandler"/>
    </extensions>

</idea-plugin>
